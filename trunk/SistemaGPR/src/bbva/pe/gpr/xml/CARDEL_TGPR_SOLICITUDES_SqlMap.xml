<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="CARDEL_TGPR_SOLICITUDES" >
 <resultMap id="resultMapSelectByCriteria" class="bbva.pe.gpr.bean.Solicitud" >
	<result column="NRO_SOLICITUD" property="nroSolicitud" jdbcType="DECIMAL" />
	<result column="COD_CENTRAL" property="codCentral" jdbcType="VARCHAR" />
	<result column="DES_MULT_TIPO_PERSONA" property="desMultTipoPersona" jdbcType="VARCHAR" />
	<result column="DES_SOLICITANTE" property="desSolicitante" jdbcType="VARCHAR" />
	<result column="DES_MULT_MONEDA" property="desMultMoneda" jdbcType="VARCHAR" />
	<result column="MTO_SOLICITUD" property="mtoSolicitud" jdbcType="DECIMAL" />
	<result column="RIESGO_ACTUAL" property="riesgoActual" jdbcType="DECIMAL" />
	<result column="RIESGO_TOTAL" property="riesgoTotal" jdbcType="DECIMAL" />
	<result column="DES_BANCA" property="desBanca" jdbcType="VARCHAR" />
	<result column="OFICINA_ALTA_COD" property="oficinaAltaCod" jdbcType="VARCHAR" />
	<result column="OFICINA_ALTA_NOM" property="oficinaAltaNom" jdbcType="VARCHAR" />
	<result column="NUMERO_DOCUMENTO" property="numeroDocumento" jdbcType="VARCHAR" />
	<result column="OFICINA_ALTA_COD" property="oficinaAltaCod" jdbcType="VARCHAR" />
	<result column="OFICINA_ALTA_NOM" property="oficinaAltaNom" jdbcType="VARCHAR" />
	<result column="GESTOR_COD" property="gestorCod" jdbcType="VARCHAR" />
    <result column="GESTOR_NOM" property="gestorNom" jdbcType="VARCHAR" />
    <result column="EMPLEADOR_COD" property="empleadorCod" jdbcType="VARCHAR" />
    <result column="EMPLEADOR_NOM" property="empleadorNom" jdbcType="VARCHAR" />
    <result column="GERENCIA_TERRITORIAL_COD" property="gerenciaTerritorialCod" jdbcType="VARCHAR" />
    <result column="GERENCIA_TERRITORIAL_NOM" property="gerenciaTerritorialNom" jdbcType="VARCHAR" />
    <result column="EJECUTIVO_CTA_COD" property="ejecutivoCtaCod" jdbcType="VARCHAR" />
    <result column="EJECUTIVO_CTA_NOM" property="ejecutivoCtaNom" jdbcType="VARCHAR" />
  	<result column="CLASIFICACION" property="clasificacion" jdbcType="VARCHAR" />
  	<result column="PRIORIDAD" property="prioridad" jdbcType="VARCHAR" />
  	<result column="ESTADO" property="estado" jdbcType="VDECIMALARCHAR" /> 
  	<result column="DEUDA_DIRECTA" property="deudaDirecta" jdbcType="DECIMAL" />
    <result column="DEUDA_INDIRECTA" property="deudaIndirecta" jdbcType="DECIMAL" />
    <result column="CASTIGO" property="castigo" jdbcType="DECIMAL" />
    <result column="DEUDA_SISTEMA_FINANCIERO" property="deudaSistemaFinanciero" jdbcType="DECIMAL" />
    <result column="RIESGO_GRUPAL" property="riesgoGrupal" jdbcType="DECIMAL" />
    <result column="RIESGO_ACTUAL" property="riesgoActual" jdbcType="DECIMAL" />
    <result column="RIESGO_TOTAL" property="riesgoTotal" jdbcType="DECIMAL" />  
    <result column="STR_FECHA_INGRESO" property="strFechaIngreso" jdbcType="VARCHAR" />
    <result column="REELEVANCIA" property="reelevancia" jdbcType="VARCHAR" />
    <result column="COD_OFICINA" property="codOficina" jdbcType="VARCHAR" />
    <result column="DES_OFICINA" property="desOficina" jdbcType="VARCHAR" />
    <result column="OTRO_RIESGO" property="otroRiesgo" jdbcType="DECIMAL" />
    <result column="ESTADO_SOLICITUD" property="estadoSolicitud" jdbcType="VARCHAR" />
  </resultMap>
  <resultMap id="ibatorgenerated_BaseResultMap" class="bbva.pe.gpr.bean.Solicitud" >
	 <result column="NRO_SOLICITUD" property="nroSolicitud" jdbcType="DECIMAL" />
    <result column="COD_CENTRAL" property="codCentral" jdbcType="VARCHAR" />
    <result column="COD_MULT_TIPO_PERSONA" property="codMultTipoPersona" jdbcType="VARCHAR" />
    <result column="NUMERO_DOCUMENTO" property="numeroDocumento" jdbcType="VARCHAR" />
    <result column="DES_SOLICITANTE" property="desSolicitante" jdbcType="VARCHAR" />
    <result column="COD_OFICINA" property="codOficina" jdbcType="VARCHAR" />
    <result column="GESTOR_COD" property="gestorCod" jdbcType="VARCHAR" />
    <result column="GESTOR_NOM" property="gestorNom" jdbcType="VARCHAR" />
    <result column="EMPLEADOR_COD" property="empleadorCod" jdbcType="VARCHAR" />
    <result column="EMPLEADOR_NOM" property="empleadorNom" jdbcType="VARCHAR" />
    <result column="EJECUTIVO_CTA_COD" property="ejecutivoCtaCod" jdbcType="VARCHAR" />
    <result column="EJECUTIVO_CTA_NOM" property="ejecutivoCtaNom" jdbcType="VARCHAR" />
    <result column="OFICINA_ALTA_COD" property="oficinaAltaCod" jdbcType="VARCHAR" />
    <result column="OFICINA_ALTA_NOM" property="oficinaAltaNom" jdbcType="VARCHAR" />
    <result column="GERENCIA_TERRITORIAL_COD" property="gerenciaTerritorialCod" jdbcType="VARCHAR" />
    <result column="GERENCIA_TERRITORIAL_NOM" property="gerenciaTerritorialNom" jdbcType="VARCHAR" />
    <result column="FECHA_INGRESO" property="fechaIngreso" jdbcType="DATE" />
    <result column="COD_BANCA" property="codBanca" jdbcType="DECIMAL" />
    <result column="COD_MULT_MONEDA" property="codMultMoneda" jdbcType="DECIMAL" />
    <result column="RATING" property="rating" jdbcType="VARCHAR" />
    <result column="CLASIFICACION" property="clasificacion" jdbcType="VARCHAR" />
    <result column="REELEVANCIA" property="reelevancia" jdbcType="VARCHAR" />
    <result column="DEUDA_DIRECTA" property="deudaDirecta" jdbcType="DECIMAL" />
    <result column="DEUDA_INDIRECTA" property="deudaIndirecta" jdbcType="VDECIMALARCHAR" />
    <result column="CASTIGO" property="castigo" jdbcType="DECIMAL" />
    <result column="DEUDA_SISTEMA_FINANCIERO" property="deudaSistemaFinanciero" jdbcType="DECIMAL" />
    <result column="RIESGO_GRUPAL" property="riesgoGrupal" jdbcType="DECIMAL" />
    <result column="RIESGO_ACTUAL" property="riesgoActual" jdbcType="DECIMAL" />
    <result column="RIESGO_TOTAL" property="riesgoTotal" jdbcType="DECIMAL" />
    <result column="PREFIJO_INGRESO" property="prefijoIngreso" jdbcType="VARCHAR" />
    <result column="ESTADO" property="estado" jdbcType="DECIMAL" />
    <result column="LUGAR_DICTAMINA" property="lugarDictamina" jdbcType="VARCHAR" />
    <result column="PRIORIDAD" property="prioridad" jdbcType="VARCHAR" />
    <result column="SCORATING" property="scorating" jdbcType="VARCHAR" />
    <result column="SCORING" property="scoring" jdbcType="VARCHAR" />
     <result column="ESTADO_SOLICITUD" property="estadoSolicitud" jdbcType="VARCHAR" />
    <result column="LISTA_DOCUMENTOS" property="listaDocumentos" jdbcType="VARCHAR" />
    <result column="REVISADO_SUB_GERENTE" property="revisadoSubGerente" jdbcType="DECIMAL" />
     <result property="asignacionBean" jdbcType="CARDEL_TGPR_SOLICITUDES.resultMapAsignacion" />
  </resultMap>
  <resultMap id="resultMapAsignacion" class="bbva.pe.gpr.bean.Asignacion" >
   	<result column="COD_ASIGNACION" property="codAsignacion" jdbcType="DECIMAL" />
    <result column="COD_USUARIO" property="codUsuario" jdbcType="VARCHAR" />
    <result column="NRO_SOLICITUD" property="nroSolicitud" jdbcType="DECIMAL" />
    <result column="NOMBRE" property="nombre" jdbcType="VARCHAR" />
    <result column="COD_ROL" property="codRol" jdbcType="DECIMAL" />
    <result column="ESTADO" property="estado" jdbcType="DECIMAL" />
    <result column="COD_CENTRAL" property="codCentral" jdbcType="VARCHAR" />
  </resultMap>
  <resultMap id="baseResultMapSelect" class="bbva.pe.gpr.bean.Solicitud" >
	 <result column="NRO_SOLICITUD" property="nroSolicitud" jdbcType="DECIMAL" />
    <result column="COD_CENTRAL" property="codCentral" jdbcType="VARCHAR" />
    <result column="COD_MULT_TIPO_PERSONA" property="codMultTipoPersona" jdbcType="VARCHAR" />
    <result column="NUMERO_DOCUMENTO" property="numeroDocumento" jdbcType="VARCHAR" />
    <result column="DES_SOLICITANTE" property="desSolicitante" jdbcType="VARCHAR" />
    <result column="COD_OFICINA" property="codOficina" jdbcType="VARCHAR" />
    <result column="GESTOR_COD" property="gestorCod" jdbcType="VARCHAR" />
    <result column="GESTOR_NOM" property="gestorNom" jdbcType="VARCHAR" />
    <result column="EMPLEADOR_COD" property="empleadorCod" jdbcType="VARCHAR" />
    <result column="EMPLEADOR_NOM" property="empleadorNom" jdbcType="VARCHAR" />
    <result column="EJECUTIVO_CTA_COD" property="ejecutivoCtaCod" jdbcType="VARCHAR" />
    <result column="EJECUTIVO_CTA_NOM" property="ejecutivoCtaNom" jdbcType="VARCHAR" />
    <result column="OFICINA_ALTA_COD" property="oficinaAltaCod" jdbcType="VARCHAR" />
    <result column="OFICINA_ALTA_NOM" property="oficinaAltaNom" jdbcType="VARCHAR" />
    <result column="GERENCIA_TERRITORIAL_COD" property="gerenciaTerritorialCod" jdbcType="VARCHAR" />
    <result column="GERENCIA_TERRITORIAL_NOM" property="gerenciaTerritorialNom" jdbcType="VARCHAR" />
    <result column="FECHA_INGRESO" property="fechaIngreso" jdbcType="DATE" />
    <result column="COD_BANCA" property="codBanca" jdbcType="DECIMAL" />
    <result column="COD_MULT_MONEDA" property="codMultMoneda" jdbcType="DECIMAL" />
    <result column="RATING" property="rating" jdbcType="VARCHAR" />
    <result column="CLASIFICACION" property="clasificacion" jdbcType="VARCHAR" />
    <result column="REELEVANCIA" property="reelevancia" jdbcType="VARCHAR" />
    <result column="DEUDA_DIRECTA" property="deudaDirecta" jdbcType="DECIMAL" />
    <result column="DEUDA_INDIRECTA" property="deudaIndirecta" jdbcType="VDECIMALARCHAR" />
    <result column="CASTIGO" property="castigo" jdbcType="DECIMAL" />
    <result column="DEUDA_SISTEMA_FINANCIERO" property="deudaSistemaFinanciero" jdbcType="DECIMAL" />
    <result column="RIESGO_GRUPAL" property="riesgoGrupal" jdbcType="DECIMAL" />
    <result column="RIESGO_ACTUAL" property="riesgoActual" jdbcType="DECIMAL" />
    <result column="RIESGO_TOTAL" property="riesgoTotal" jdbcType="DECIMAL" />
    <result column="PREFIJO_INGRESO" property="prefijoIngreso" jdbcType="VARCHAR" />
    <result column="ESTADO" property="estado" jdbcType="DECIMAL" />
    <result column="LUGAR_DICTAMINA" property="lugarDictamina" jdbcType="VARCHAR" />
    <result column="PRIORIDAD" property="prioridad" jdbcType="VARCHAR" />
    <result column="SCORATING" property="scorating" jdbcType="VARCHAR" />
    <result column="SCORING" property="scoring" jdbcType="VARCHAR" />
     <result column="ESTADO_SOLICITUD" property="estadoSolicitud" jdbcType="VARCHAR" />
    <result column="LISTA_DOCUMENTOS" property="listaDocumentos" jdbcType="VARCHAR" />
    <result column="REVISADO_SUB_GERENTE" property="revisadoSubGerente" jdbcType="DECIMAL" />
    <result column="GRUPO_PERSONA" property="grupoPersona" jdbcType="VARCHAR" />
  </resultMap>
  <select id="ibatorgenerated_selectByPrimaryKey" resultMap="baseResultMapSelect" parameterClass="bbva.pe.gpr.bean.Solicitud" >
    select NRO_SOLICITUD, COD_CENTRAL, COD_MULT_TIPO_PERSONA, NUMERO_DOCUMENTO, DES_SOLICITANTE,
      COD_OFICINA, GESTOR_COD, GESTOR_NOM, EMPLEADOR_COD, EMPLEADOR_NOM, EJECUTIVO_CTA_COD,
      EJECUTIVO_CTA_NOM, OFICINA_ALTA_COD, OFICINA_ALTA_NOM, GERENCIA_TERRITORIAL_COD,
      GERENCIA_TERRITORIAL_NOM, FECHA_INGRESO, COD_BANCA, COD_MULT_MONEDA, RATING, CLASIFICACION,
      REELEVANCIA, DEUDA_DIRECTA, DEUDA_INDIRECTA, CASTIGO, DEUDA_SISTEMA_FINANCIERO, RIESGO_GRUPAL,
      RIESGO_ACTUAL, RIESGO_TOTAL, PREFIJO_INGRESO, ESTADO, LUGAR_DICTAMINA, PRIORIDAD, SCORATING,
      SCORING, LISTA_DOCUMENTOS, REVISADO_SUB_GERENTE, ESTADO_SOLICITUD, GRUPO_PERSONA
    from CARDEL.TGPR_SOLICITUDES
    where NRO_SOLICITUD = #nroSolicitud:DECIMAL#
  </select>
  <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="bbva.pe.gpr.bean.Solicitud" >
   delete from CARDEL.TGPR_SOLICITUDES
    where NRO_SOLICITUD = #nroSolicitud:DECIMAL#
  </delete>
  <insert id="ibatorgenerated_insert" parameterClass="bbva.pe.gpr.bean.Solicitud"  >
   <selectKey keyProperty="nroSolicitud" resultClass="Long">
    	  SELECT CARDEL.SQ_TCARDEL_SOLICITUD_COD.NEXTVAL FROM DUAL
  	</selectKey>
    insert into CARDEL.TGPR_SOLICITUDES (NRO_SOLICITUD, COD_CENTRAL, COD_MULT_TIPO_PERSONA,
      NUMERO_DOCUMENTO, DES_SOLICITANTE, COD_OFICINA, GESTOR_COD, GESTOR_NOM, EMPLEADOR_COD,
      EMPLEADOR_NOM, EJECUTIVO_CTA_COD, EJECUTIVO_CTA_NOM, OFICINA_ALTA_COD, OFICINA_ALTA_NOM,
      GERENCIA_TERRITORIAL_COD, GERENCIA_TERRITORIAL_NOM, FECHA_INGRESO, COD_BANCA, COD_MULT_MONEDA,
      RATING, CLASIFICACION, REELEVANCIA, DEUDA_DIRECTA, DEUDA_INDIRECTA, CASTIGO,
      DEUDA_SISTEMA_FINANCIERO, RIESGO_GRUPAL, RIESGO_ACTUAL, RIESGO_TOTAL, PREFIJO_INGRESO, ESTADO,
      LUGAR_DICTAMINA, PRIORIDAD, SCORATING, SCORING, ESTADO_SOLICITUD, LISTA_DOCUMENTOS, REVISADO_SUB_GERENTE, GRUPO_PERSONA)
    values (#nroSolicitud:DECIMAL#, #codCentral:VARCHAR#, #codMultTipoPersona:VARCHAR#,
      #numeroDocumento:VARCHAR#, #desSolicitante:VARCHAR#, #codOficina:VARCHAR#,
      #gestorCod:VARCHAR#, #gestorNom:VARCHAR#, #empleadorCod:VARCHAR#, #empleadorNom:VARCHAR#,
      #ejecutivoCtaCod:VARCHAR#, #ejecutivoCtaNom:VARCHAR#, #oficinaAltaCod:VARCHAR#,
      #oficinaAltaNom:VARCHAR#, #gerenciaTerritorialCod:VARCHAR#, #gerenciaTerritorialNom:VARCHAR#,
      #fechaIngreso:DATE#, #codBanca:DECIMAL#, #codMultMoneda:DECIMAL#, #rating:VARCHAR#,
      #clasificacion:VARCHAR#, #reelevancia:VARCHAR#, #deudaDirecta:VARCHAR#,
      #deudaIndirecta:VARCHAR#, #castigo:VARCHAR#, #deudaSistemaFinanciero:VARCHAR#,
      #riesgoGrupal:VARCHAR#, #riesgoActual:VARCHAR#, #riesgoTotal:VARCHAR#,
      #prefijoIngreso:VARCHAR#, 1, #lugarDictamina:VARCHAR#, #prioridad:VARCHAR#,
      #scorating:VARCHAR#, #scoring:VARCHAR#, #estadoSolicitud:VARCHAR#, #listaDocumentos:VARCHAR#, #revisadoSubGerente:DECIMAL#, #grupoPersona:VARCHAR#)
       
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="bbva.pe.gpr.bean.Solicitud" >
    <selectKey keyProperty="nroSolicitud" resultClass="long">
    	  SELECT CARDEL.SQ_TCARDEL_SOLICITUD_COD.NEXTVAL * FROM DUAL
  	</selectKey>
    insert into CARDEL.TGPR_SOLICITUDES
    <dynamic prepend="(" >
      <isNotNull prepend="," property="nroSolicitud" >
        NRO_SOLICITUD
      </isNotNull>
      <isNotNull prepend="," property="codCentral" >
        COD_CENTRAL
      </isNotNull>
      <isNotNull prepend="," property="codMultTipoPersona" >
        COD_MULT_TIPO_PERSONA
      </isNotNull>
      <isNotNull prepend="," property="numeroDocumento" >
        NUMERO_DOCUMENTO
      </isNotNull>
      <isNotNull prepend="," property="desSolicitante" >
        DES_SOLICITANTE
      </isNotNull>
      <isNotNull prepend="," property="codOficina" >
        COD_OFICINA
      </isNotNull>
      <isNotNull prepend="," property="gestorCod" >
        GESTOR_COD
      </isNotNull>
      <isNotNull prepend="," property="gestorNom" >
        GESTOR_NOM
      </isNotNull>
      <isNotNull prepend="," property="empleadorCod" >
        EMPLEADOR_COD
      </isNotNull>
      <isNotNull prepend="," property="empleadorNom" >
        EMPLEADOR_NOM
      </isNotNull>
      <isNotNull prepend="," property="ejecutivoCtaCod" >
        EJECUTIVO_CTA_COD
      </isNotNull>
      <isNotNull prepend="," property="ejecutivoCtaNom" >
        EJECUTIVO_CTA_NOM
      </isNotNull>
      <isNotNull prepend="," property="oficinaAltaCod" >
        OFICINA_ALTA_COD
      </isNotNull>
      <isNotNull prepend="," property="oficinaAltaNom" >
        OFICINA_ALTA_NOM
      </isNotNull>
      <isNotNull prepend="," property="gerenciaTerritorialCod" >
        GERENCIA_TERRITORIAL_COD
      </isNotNull>
      <isNotNull prepend="," property="gerenciaTerritorialNom" >
        GERENCIA_TERRITORIAL_NOM
      </isNotNull>
      <isNotNull prepend="," property="fechaIngreso" >
        FECHA_INGRESO
      </isNotNull>
      <isNotNull prepend="," property="codBanca" >
        COD_BANCA
      </isNotNull>
      <isNotNull prepend="," property="codMultMoneda" >
        COD_MULT_MONEDA
      </isNotNull>
      <isNotNull prepend="," property="rating" >
        RATING
      </isNotNull>
      <isNotNull prepend="," property="clasificacion" >
        CLASIFICACION
      </isNotNull>
      <isNotNull prepend="," property="reelevancia" >
        REELEVANCIA
      </isNotNull>
      <isNotNull prepend="," property="deudaDirecta" >
        DEUDA_DIRECTA
      </isNotNull>
      <isNotNull prepend="," property="deudaIndirecta" >
        DEUDA_INDIRECTA
      </isNotNull>
      <isNotNull prepend="," property="castigo" >
        CASTIGO
      </isNotNull>
      <isNotNull prepend="," property="deudaSistemaFinanciero" >
        DEUDA_SISTEMA_FINANCIERO
      </isNotNull>
      <isNotNull prepend="," property="riesgoGrupal" >
        RIESGO_GRUPAL
      </isNotNull>
      <isNotNull prepend="," property="riesgoActual" >
        RIESGO_ACTUAL
      </isNotNull>
      <isNotNull prepend="," property="riesgoTotal" >
        RIESGO_TOTAL
      </isNotNull>
      <isNotNull prepend="," property="prefijoIngreso" >
        PREFIJO_INGRESO
      </isNotNull>
      <isNotNull prepend="," property="estado" >
        ESTADO
      </isNotNull>
      <isNotNull prepend="," property="lugarDictamina" >
        LUGAR_DICTAMINA
      </isNotNull>
      <isNotNull prepend="," property="prioridad" >
        PRIORIDAD
      </isNotNull>
      <isNotNull prepend="," property="scorating" >
        SCORATING
      </isNotNull>
      <isNotNull prepend="," property="scoring" >
        SCORING
      </isNotNull>
      <isNotNull prepend="," property="listaDocumentos" >
        LISTA_DOCUMENTOS
      </isNotNull>
      <isNotNull prepend="," property="revisadoSubGerente" >
        REVISADO_SUB_GERENTE
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="nroSolicitud" >
      	 #nroSolicitud:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="codCentral" >
        #codCentral:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="codMultTipoPersona" >
        #codMultTipoPersona:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="numeroDocumento" >
        #numeroDocumento:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="desSolicitante" >
        #desSolicitante:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="codOficina" >
        #codOficina:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="gestorCod" >
        #gestorCod:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="gestorNom" >
        #gestorNom:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="empleadorCod" >
        #empleadorCod:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="empleadorNom" >
        #empleadorNom:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="ejecutivoCtaCod" >
        #ejecutivoCtaCod:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="ejecutivoCtaNom" >
        #ejecutivoCtaNom:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="oficinaAltaCod" >
        #oficinaAltaCod:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="oficinaAltaNom" >
        #oficinaAltaNom:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="gerenciaTerritorialCod" >
        #gerenciaTerritorialCod:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="gerenciaTerritorialNom" >
        #gerenciaTerritorialNom:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="fechaIngreso" >
        #fechaIngreso:DATE#
      </isNotNull>
      <isNotNull prepend="," property="codBanca" >
        #codBanca:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="codMultMoneda" >
        #codMultMoneda:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="rating" >
        #rating:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="clasificacion" >
        #clasificacion:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="reelevancia" >
        #reelevancia:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="deudaDirecta" >
        #deudaDirecta:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="deudaIndirecta" >
        #deudaIndirecta:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="castigo" >
        #castigo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="deudaSistemaFinanciero" >
        #deudaSistemaFinanciero:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="riesgoGrupal" >
        #riesgoGrupal:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="riesgoActual" >
        #riesgoActual:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="riesgoTotal" >
        #riesgoTotal:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="prefijoIngreso" >
        #prefijoIngreso:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="estado" >
        #estado:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="lugarDictamina" >
        #lugarDictamina:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="prioridad" >
        #prioridad:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="scorating" >
        #scorating:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="scoring" >
        #scoring:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="listaDocumentos" >
        #listaDocumentos:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="revisadoSubGerente" >
        #revisadoSubGerente:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="estadoSolicitud" >
        #estadoSolicitud:VARCHAR#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="bbva.pe.gpr.bean.Solicitud" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Sep 25 16:43:20 COT 2012.
    -->
    update CARDEL.TGPR_SOLICITUDES
    <dynamic prepend="set" >
      <isNotNull prepend="," property="codCentral" >
        COD_CENTRAL = #codCentral:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="codMultTipoPersona" >
        COD_MULT_TIPO_PERSONA = #codMultTipoPersona:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="numeroDocumento" >
        NUMERO_DOCUMENTO = #numeroDocumento:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="desSolicitante" >
        DES_SOLICITANTE = #desSolicitante:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="codOficina" >
        COD_OFICINA = #codOficina:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="gestorCod" >
        GESTOR_COD = #gestorCod:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="gestorNom" >
        GESTOR_NOM = #gestorNom:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="empleadorCod" >
        EMPLEADOR_COD = #empleadorCod:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="empleadorNom" >
        EMPLEADOR_NOM = #empleadorNom:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="ejecutivoCtaCod" >
        EJECUTIVO_CTA_COD = #ejecutivoCtaCod:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="ejecutivoCtaNom" >
        EJECUTIVO_CTA_NOM = #ejecutivoCtaNom:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="oficinaAltaCod" >
        OFICINA_ALTA_COD = #oficinaAltaCod:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="oficinaAltaNom" >
        OFICINA_ALTA_NOM = #oficinaAltaNom:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="gerenciaTerritorialCod" >
        GERENCIA_TERRITORIAL_COD = #gerenciaTerritorialCod:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="gerenciaTerritorialNom" >
        GERENCIA_TERRITORIAL_NOM = #gerenciaTerritorialNom:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="fechaIngreso" >
        FECHA_INGRESO = #fechaIngreso:DATE#
      </isNotNull>
      <isNotNull prepend="," property="codBanca" >
        COD_BANCA = #codBanca:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="codMultMoneda" >
        COD_MULT_MONEDA = #codMultMoneda:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="rating" >
        RATING = #rating:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="clasificacion" >
        CLASIFICACION = #clasificacion:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="reelevancia" >
        REELEVANCIA = #reelevancia:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="deudaDirecta" >
        DEUDA_DIRECTA = #deudaDirecta:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="deudaIndirecta" >
        DEUDA_INDIRECTA = #deudaIndirecta:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="castigo" >
        CASTIGO = #castigo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="deudaSistemaFinanciero" >
        DEUDA_SISTEMA_FINANCIERO = #deudaSistemaFinanciero:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="riesgoGrupal" >
        RIESGO_GRUPAL = #riesgoGrupal:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="riesgoActual" >
        RIESGO_ACTUAL = #riesgoActual:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="riesgoTotal" >
        RIESGO_TOTAL = #riesgoTotal:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="prefijoIngreso" >
        PREFIJO_INGRESO = #prefijoIngreso:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="estado" >
        ESTADO = #estado:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="lugarDictamina" >
        LUGAR_DICTAMINA = #lugarDictamina:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="prioridad" >
        PRIORIDAD = #prioridad:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="scorating" >
        SCORATING = #scorating:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="scoring" >
        SCORING = #scoring:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="listaDocumentos" >
        LISTA_DOCUMENTOS = #listaDocumentos:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="revisadoSubGerente" >
        REVISADO_SUB_GERENTE = #revisadoSubGerente:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="estadoSolicitud" >
        ESTADO_SOLICITUD = #estadoSolicitud:VARCHARL#
      </isNotNull>
    </dynamic>
    where NRO_SOLICITUD = #nroSolicitud:DECIMAL#
  </update>
  
  <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="bbva.pe.gpr.bean.Solicitud" >
    update CARDEL.TGPR_SOLICITUDES
    set COD_CENTRAL = #codCentral:VARCHAR#,
      COD_MULT_TIPO_PERSONA = #codMultTipoPersona:VARCHAR#,
      NUMERO_DOCUMENTO = #numeroDocumento:VARCHAR#,
      DES_SOLICITANTE = #desSolicitante:VARCHAR#,
      COD_OFICINA = #codOficina:VARCHAR#,
      GESTOR_COD = #gestorCod:VARCHAR#,
      GESTOR_NOM = #gestorNom:VARCHAR#,
      EMPLEADOR_COD = #empleadorCod:VARCHAR#,
      EMPLEADOR_NOM = #empleadorNom:VARCHAR#,
      EJECUTIVO_CTA_COD = #ejecutivoCtaCod:VARCHAR#,
      EJECUTIVO_CTA_NOM = #ejecutivoCtaNom:VARCHAR#,
      OFICINA_ALTA_COD = #oficinaAltaCod:VARCHAR#,
      OFICINA_ALTA_NOM = #oficinaAltaNom:VARCHAR#,
      GERENCIA_TERRITORIAL_COD = #gerenciaTerritorialCod:VARCHAR#,
      GERENCIA_TERRITORIAL_NOM = #gerenciaTerritorialNom:VARCHAR#,
      FECHA_INGRESO = #fechaIngreso:DATE#,
      COD_BANCA = #codBanca:DECIMAL#,
      COD_MULT_MONEDA = #codMultMoneda:DECIMAL#,
      RATING = #rating:VARCHAR#,
      CLASIFICACION = #clasificacion:VARCHAR#,
      REELEVANCIA = #reelevancia:VARCHAR#,
      DEUDA_DIRECTA = #deudaDirecta:VARCHAR#,
      DEUDA_INDIRECTA = #deudaIndirecta:VARCHAR#,
      CASTIGO = #castigo:VARCHAR#,
      DEUDA_SISTEMA_FINANCIERO = #deudaSistemaFinanciero:VARCHAR#,
      RIESGO_GRUPAL = #riesgoGrupal:VARCHAR#,
      RIESGO_ACTUAL = #riesgoActual:VARCHAR#,
      RIESGO_TOTAL = #riesgoTotal:VARCHAR#,
      PREFIJO_INGRESO = #prefijoIngreso:VARCHAR#,
      ESTADO = #estado:DECIMAL#,
      LUGAR_DICTAMINA = #lugarDictamina:VARCHAR#,
      PRIORIDAD = #prioridad:VARCHAR#,
      SCORATING = #scorating:VARCHAR#,
      SCORING = #scoring:VARCHAR#,
      LISTA_DOCUMENTOS = #listaDocumentos:VARCHAR#,
      REVISADO_SUB_GERENTE = #revisadoSubGerente:DECIMAL#,
      ESTADO_SOLICITUD = #estadoSolicitud#:VARCHAR"
    where NRO_SOLICITUD = #nroSolicitud:DECIMAL#
  </update>
  
  <select id="getLstSolicitudByCriteria" resultMap="resultMapSelectByCriteria" parameterClass="bbva.pe.gpr.bean.Solicitud">
  		SELECT 
        S.NUMERO_DOCUMENTO,
        S.OFICINA_ALTA_COD,
      S.OFICINA_ALTA_NOM,
      S.GESTOR_COD,
      S.GESTOR_NOM,
      S.EMPLEADOR_COD,
      S.EMPLEADOR_NOM,
      S.GERENCIA_TERRITORIAL_COD,
      S.GERENCIA_TERRITORIAL_NOM,
      S.EJECUTIVO_CTA_COD,
      S.EJECUTIVO_CTA_NOM,
      S.DEUDA_DIRECTA,
      S.DEUDA_INDIRECTA,
      S.CASTIGO,
      S.DEUDA_SISTEMA_FINANCIERO,
      S.CLASIFICACION,    
      S.COD_OFICINA,
      O.NOMBRE AS DES_OFICINA,  
    S.PRIORIDAD,
    S.ESTADO,
    S.NRO_SOLICITUD, TO_CHAR(S.FECHA_INGRESO,'DD/MM/YYYY') AS STR_FECHA_INGRESO, S.COD_CENTRAL,
    (SELECT STR_VALOR FROM CARDEL.TGPR_MULTITABLA_DETALLE MD WHERE
     MD.COD_MULTITABLA = SUBSTR(S.COD_MULT_TIPO_PERSONA,1, 4) AND MD.COD_ELEMENTO = SUBSTR(S.COD_MULT_TIPO_PERSONA,6, LENGTH(S.COD_MULT_TIPO_PERSONA))) DES_MULT_TIPO_PERSONA,
    S.DES_SOLICITANTE, 
    (SELECT MD1.COD_ELEMENTO FROM CARDEL.TGPR_MULTITABLA_DETALLE MD1 WHERE
    MD1.COD_MULTITABLA = SUBSTR(S.COD_MULT_MONEDA,1, 4) AND MD1.COD_ELEMENTO = SUBSTR(S.COD_MULT_MONEDA,6, 3)) DES_MULT_MONEDA,
    SUM(SD.MTO_PRODUCTO) MTO_SOLICITUD, 
    S.RIESGO_GRUPAL,
    S.RIESGO_ACTUAL,
    CARDEL.PCARDEL_COMMON.SUMAR(SUM(SD.MTO_PRODUCTO), NVL(S.RIESGO_ACTUAL, 0)) RIESGO_TOTAL,
    B.NOMBRE DES_BANCA, 
    S.OFICINA_ALTA_COD, S.OFICINA_ALTA_NOM, S.REELEVANCIA,
    SUM(NVL(SD.MTO_GARANTIA, 0)) OTRO_RIESGO, S.ESTADO_SOLICITUD
    FROM 
    CARDEL.TGPR_SOLICITUDES S LEFT JOIN  CARDEL.TGPR_ASIGNACIONES ASG 
    ON ASG.NRO_SOLICITUD = S.NRO_SOLICITUD,
    CARDEL.TGPR_SOLICITUD_DETALLES SD, CARDEL.TGPR_BANCAS B, CARDEL.TGPR_OFICINAS O
    WHERE SD.NRO_SOLICITUD= S.NRO_SOLICITUD AND
    S.COD_BANCA = B.COD_BANCA  AND  S.COD_OFICINA = O.COD_OFICINA AND
      S.ESTADO = 1 AND
		( #nroSolicitud:DECIMAL# IS NULL OR #nroSolicitud:DECIMAL# = -1 OR S.NRO_SOLICITUD = #nroSolicitud:DECIMAL#) AND
	    ( #codBanca:DECIMAL# IS NULL OR #codBanca:DECIMAL# = -1 OR  S.COD_BANCA = #codBanca:DECIMAL#) AND
	    ( #codCentral:VARCHAR# IS NULL OR #codCentral:VARCHAR# = '' OR S.COD_CENTRAL = UPPER(#codCentral:VARCHAR#)) AND
	    ( #oficinaAltaCod:VARCHAR# IS NULL OR #oficinaAltaCod:VARCHAR# = '-1' OR S.OFICINA_ALTA_COD = UPPER(#oficinaAltaCod:VARCHAR#)) AND
	    ( #oficinaAltaNom:VARCHAR# IS NULL OR #oficinaAltaNom:VARCHAR# = ''  OR S.OFICINA_ALTA_NOM LIKE UPPER(#oficinaAltaNom:VARCHAR#)) AND
	    ( (#fechaIngresoIni:DATE# IS NULL AND #fechaIngresoFin:DATE# IS NULL) OR (TO_DATE(TO_CHAR(S.FECHA_INGRESO,'DD/MM/YYYY'),'DD/MM/YYYY') BETWEEN #fechaIngresoIni:DATE# AND #fechaIngresoFin:DATE# )) AND
	    ( #estado:DECIMAL# IS NULL OR #estado:DECIMAL# = -1 OR S.ESTADO = #estado:DECIMAL#) AND 
	    ( #asignacionBean.codUsuario:VARCHAR# IS NULL OR #asignacionBean.codUsuario:VARCHAR# = '' OR ASG.COD_USUARIO = UPPER(#asignacionBean.codUsuario:VARCHAR#)) AND
	    ( #asignacionBean.nombre:VARCHAR# IS NULL OR #asignacionBean.nombre:VARCHAR# = '' OR ASG.NOMBRE LIKE UPPER(#asignacionBean.nombre:VARCHAR#)) AND
	    ( #asignacionBean.codRol:DECIMAL# IS NULL OR #asignacionBean.codRol:DECIMAL# = -1 OR ASG.COD_ROL = #asignacionBean.codRol:DECIMAL#) 
	    GROUP BY (S.NRO_SOLICITUD, S.FECHA_INGRESO, S.COD_CENTRAL, S.DES_SOLICITANTE,S.RIESGO_ACTUAL, S.RIESGO_TOTAL, B.NOMBRE, 
		S.OFICINA_ALTA_COD, S.OFICINA_ALTA_NOM, S.COD_MULT_TIPO_PERSONA, S.COD_MULT_MONEDA,S.NUMERO_DOCUMENTO,S.OFICINA_ALTA_COD,S.OFICINA_ALTA_NOM,GESTOR_COD,GESTOR_NOM,
		EMPLEADOR_COD,EMPLEADOR_NOM,GERENCIA_TERRITORIAL_COD,GERENCIA_TERRITORIAL_NOM,EJECUTIVO_CTA_COD,EJECUTIVO_CTA_NOM,DEUDA_DIRECTA,DEUDA_INDIRECTA,CASTIGO,DEUDA_SISTEMA_FINANCIERO
		,RIESGO_GRUPAL,RIESGO_ACTUAL,RIESGO_TOTAL,CLASIFICACION, S.PRIORIDAD, S.ESTADO, S.REELEVANCIA, O.NOMBRE, s.COD_OFICINA, ESTADO_SOLICITUD)
	    ORDER BY S.NRO_SOLICITUD
  </select>
</sqlMap>